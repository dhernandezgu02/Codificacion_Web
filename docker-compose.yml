services:
  backend:
    build:
      context: ./backend
    environment:
      - SESSION_TIMEOUT_HOURS=24
      - MAX_FILE_SIZE_MB=50
      - CORS_ORIGINS=*
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
    networks:
      - internal
      - dokploy-network
    restart: unless-stopped

  frontend:
    build:
      context: ./frontend
    ports:
      - "5170:80"
    networks:
      - internal
      - dokploy-network
    restart: unless-stopped
    depends_on:
      - backend

networks:
  internal:
    driver: bridge
  dokploy-network:
    external: true
